<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract Reviewer - V4 (Dark Elements)</title>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden; /* No scrolling */
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #FAFAFA;
            color: #1a1a1a;
            font-size: 15px;
        }

        /* Mockup Controls */
        .mockup-controls {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 12px 20px;
            border-bottom: 1px solid rgba(0,0,0,0.06);
            z-index: 1000;
        }

        .mockup-controls h2 {
            font-size: 11px;
            margin-bottom: 8px;
            color: #666;
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .state-buttons {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .state-btn {
            padding: 4px 12px;
            border: none;
            background: #f5f5f5;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            color: #666;
        }

        .state-btn:hover {
            background: #eaeaea;
            color: #1a1a1a;
        }

        .state-btn.active {
            background: #0d1321;
            color: white;
        }

        /* Main Application Container - FULL SCREEN */
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 100px 48px 48px 48px; /* Top padding for controls */
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 48px;
        }

        /* Logo - Icon Only */
        .app-logo {
            width: 48px;
            height: 48px;
            background: #0d1321;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .hamburger-menu {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 8px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: 400ms;
            color: #0d1321;
            opacity: 0.6;
        }

        .hamburger-menu:hover {
            opacity: 1;
        }

        .hamburger-menu svg {
            transition: 400ms;
        }

        /* Drop Zone - THE HERO */
        .drop-zone-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin-bottom: 32px;
        }

        .drop-zone {
            width: 100%;
            height: 100%;
            min-height: 300px;
            max-height: 400px;
            border: 1px solid rgba(13, 19, 33, 0.1);
            border-radius: 8px;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s;
        }

        .drop-zone:hover {
            border-color: #0d1321;
            border-width: 2px;
            background: #fafafa;
        }

        .drop-zone.hovering {
            border-color: #0d1321;
            border-width: 3px;
            background: #f5f5f5;
        }

        .drop-zone.processing {
            border-color: #0d1321;
            border-width: 2px;
            cursor: not-allowed;
        }

        .drop-zone.completed {
            border-color: #0d1321;
            border-width: 3px;
            background: white;
        }

        .drop-zone.error {
            border-color: #dc2626;
            border-style: solid;
            border-width: 3px;
            background: rgba(220, 38, 38, 0.02);
        }

        /* Icons */
        .drop-icon {
            color: rgba(13, 19, 33, 0.3);
            margin-bottom: 16px;
            transition: all 0.4s;
        }

        .drop-zone:hover .drop-icon {
            color: #0d1321;
        }

        .drop-text {
            font-size: 15px;
            color: rgba(13, 19, 33, 0.5);
            text-align: center;
            letter-spacing: 0.01em;
            transition: all 0.4s;
        }

        .drop-zone:hover .drop-text {
            color: #0d1321;
            font-weight: 500;
        }

        .drop-filename {
            font-size: 18px;
            color: #0d1321;
            font-weight: 600;
            margin-top: 12px;
            letter-spacing: -0.01em;
        }

        /* Prompt Type Buttons - Dark Outline Style */
        .prompt-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 32px;
        }

        .prompt-btn {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 12px 28px;
            background-color: white;
            border: 1px solid rgba(13, 19, 33, 0.15);
            border-radius: 5px;
            cursor: pointer;
            transition: 400ms;
            color: #0d1321;
            font-weight: 500;
            font-size: 15px;
        }

        .prompt-btn:hover {
            border-color: #0d1321;
            border-width: 2px;
            font-weight: 600;
        }

        .prompt-btn.selected {
            background-color: #0d1321;
            border-color: #0d1321;
            border-width: 1px;
            color: white;
            font-weight: 600;
        }

        .prompt-btn.selected:hover {
            background-color: #0d1321;
            color: white;
        }

        /* Output Buttons */
        .output-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 32px;
        }

        .output-btn {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 12px 28px;
            background-color: white;
            border: 1px solid rgba(13, 19, 33, 0.15);
            border-radius: 5px;
            cursor: pointer;
            transition: 400ms;
            color: #0d1321;
            font-weight: 500;
            font-size: 15px;
        }

        .output-btn:hover {
            background-color: #0d1321;
            border-color: #0d1321;
            color: white;
            font-weight: 600;
        }

        /* Status Area */
        .status-area {
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .status-message {
            font-size: 16px;
            color: #0d1321;
            margin-bottom: 8px;
            font-weight: 600;
            letter-spacing: -0.01em;
            text-align: center;
        }

        .status-time {
            font-size: 13px;
            color: rgba(13, 19, 33, 0.5);
            margin-bottom: 16px;
        }

        .status-progress {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .progress-stage {
            width: 60px;
            height: 3px;
            background: rgba(13, 19, 33, 0.1);
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .progress-stage.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: #0d1321;
            animation: progressFill 0.4s ease-out forwards;
        }

        @keyframes progressFill {
            from { width: 0%; }
            to { width: 100%; }
        }

        /* Error - LOUD */
        .error-message {
            color: #dc2626;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            letter-spacing: -0.01em;
            text-align: center;
        }

        .error-suggestions {
            font-size: 14px;
            color: rgba(13, 19, 33, 0.6);
            line-height: 1.6;
            margin-bottom: 16px;
            text-align: center;
        }

        .retry-btn {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px 24px;
            background-color: white;
            border: 1px solid rgba(13, 19, 33, 0.15);
            border-radius: 5px;
            cursor: pointer;
            transition: 400ms;
            color: #0d1321;
            font-weight: 500;
            font-size: 15px;
            margin: 0 auto;
        }

        .retry-btn:hover {
            background-color: #0d1321;
            border-color: #0d1321;
            color: white;
            font-weight: 600;
        }

        /* Success checkmark animation */
        .success-icon {
            color: #10b981;
        }

        .success-icon svg {
            animation: checkmarkPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes checkmarkPop {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.3);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Spinner animation */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .processing-icon svg {
            animation: spin 2s linear infinite;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Mockup Controls -->
    <div class="mockup-controls">
        <h2>State Viewer</h2>
        <div class="state-buttons">
            <button class="state-btn active" onclick="setState('idle')">Idle</button>
            <button class="state-btn" onclick="setState('prompt-selected')">Prompt Selected</button>
            <button class="state-btn" onclick="setState('file-hover')">File Hover</button>
            <button class="state-btn" onclick="setState('analysis-running')">Running</button>
            <button class="state-btn" onclick="setState('completed')">Completed</button>
            <button class="state-btn" onclick="setState('error')">Error</button>
        </div>
    </div>

    <!-- Main Application - FULL SCREEN -->
    <div class="app-container">
        <!-- Header -->
        <div class="app-header">
            <div class="app-logo">K</div>
            <button class="hamburger-menu">
                <i data-lucide="menu" size="20"></i>
            </button>
        </div>

        <!-- Drop Zone - THE HERO (flexbox fills available space) -->
        <div class="drop-zone-container">
            <div class="drop-zone" id="dropZone">
                <div class="drop-icon" id="dropIcon">
                    <i data-lucide="upload-cloud" size="56"></i>
                </div>
                <div class="drop-text" id="dropText">Træk dokument hertil</div>
                <div class="drop-filename hidden" id="dropFilename"></div>
            </div>
        </div>

        <!-- Prompt Type Buttons -->
        <div class="prompt-buttons" id="promptButtons">
            <button class="prompt-btn" id="promptBtn1">Kontrakt</button>
            <button class="prompt-btn" id="promptBtn2">Manual</button>
            <button class="prompt-btn" id="promptBtn3">Compliance</button>
        </div>

        <!-- Output Buttons -->
        <div class="output-buttons hidden" id="outputButtons">
            <button class="output-btn">Word</button>
            <button class="output-btn">PDF</button>
            <button class="output-btn">Markdown</button>
        </div>

        <!-- Status Area -->
        <div class="status-area" id="statusArea">
            <div class="status-message hidden" id="statusMessage"></div>
            <div class="status-time hidden" id="statusTime"></div>
            <div class="status-progress hidden" id="statusProgress">
                <div class="progress-stage"></div>
                <div class="progress-stage"></div>
                <div class="progress-stage"></div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        let currentState = 'idle';
        let selectedPrompt = null;

        // Prompt button handlers
        document.querySelectorAll('.prompt-btn').forEach((btn, index) => {
            btn.addEventListener('click', () => {
                if (currentState === 'idle' || currentState === 'prompt-selected') {
                    selectedPrompt = index + 1;
                    setState('prompt-selected');
                }
            });
        });

        function setState(state) {
            currentState = state;

            // Update active button in controls
            document.querySelectorAll('.state-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }

            const dropZone = document.getElementById('dropZone');
            const dropIcon = document.getElementById('dropIcon');
            const dropText = document.getElementById('dropText');
            const dropFilename = document.getElementById('dropFilename');
            const promptButtons = document.getElementById('promptButtons');
            const outputButtons = document.getElementById('outputButtons');
            const statusMessage = document.getElementById('statusMessage');
            const statusTime = document.getElementById('statusTime');
            const statusProgress = document.getElementById('statusProgress');

            // Reset classes
            dropZone.className = 'drop-zone';
            dropFilename.className = 'drop-filename hidden';
            dropIcon.className = 'drop-icon';
            statusMessage.className = 'status-message hidden';

            switch(state) {
                case 'idle':
                    dropIcon.innerHTML = '<i data-lucide="upload-cloud" size="56"></i>';
                    dropText.textContent = 'Træk dokument hertil';
                    dropText.classList.remove('hidden');
                    promptButtons.classList.remove('hidden');
                    outputButtons.classList.add('hidden');
                    statusMessage.classList.add('hidden'); // No message
                    statusTime.classList.add('hidden');
                    statusProgress.classList.add('hidden');

                    document.querySelectorAll('.prompt-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    break;

                case 'prompt-selected':
                    dropIcon.innerHTML = '<i data-lucide="upload-cloud" size="56"></i>';
                    dropIcon.style.color = '#0d1321';
                    dropText.textContent = 'Klar til at modtage';
                    dropText.style.color = '#0d1321';
                    dropText.style.fontWeight = '500';
                    dropText.classList.remove('hidden');
                    promptButtons.classList.remove('hidden');
                    outputButtons.classList.add('hidden');
                    statusMessage.classList.add('hidden'); // No message
                    statusTime.classList.add('hidden');
                    statusProgress.classList.add('hidden');

                    if (selectedPrompt) {
                        document.querySelectorAll('.prompt-btn').forEach(btn => btn.classList.remove('selected'));
                        document.getElementById(`promptBtn${selectedPrompt}`).classList.add('selected');
                    }
                    break;

                case 'file-hover':
                    dropZone.classList.add('hovering');
                    dropIcon.innerHTML = '<i data-lucide="arrow-down-circle" size="56"></i>';
                    dropIcon.style.color = '#0d1321';
                    dropText.textContent = 'Slip for at uploade';
                    dropText.style.color = '#0d1321';
                    dropText.style.fontWeight = '600';
                    dropText.classList.remove('hidden');
                    promptButtons.classList.remove('hidden');
                    outputButtons.classList.add('hidden');
                    statusMessage.classList.add('hidden');
                    statusTime.classList.add('hidden');
                    statusProgress.classList.add('hidden');

                    if (selectedPrompt) {
                        document.querySelectorAll('.prompt-btn').forEach(btn => btn.classList.remove('selected'));
                        document.getElementById(`promptBtn${selectedPrompt}`).classList.add('selected');
                    }
                    break;

                case 'analysis-running':
                    dropZone.classList.add('processing');
                    dropIcon.innerHTML = '<i data-lucide="loader" size="48"></i>';
                    dropIcon.className = 'drop-icon processing-icon';
                    dropIcon.style.color = '#0d1321';
                    dropText.classList.add('hidden');
                    dropFilename.textContent = 'franchise-agreement.pdf';
                    dropFilename.classList.remove('hidden');
                    promptButtons.classList.add('hidden');
                    outputButtons.classList.add('hidden');
                    statusMessage.textContent = 'Analyserer indhold';
                    statusMessage.classList.remove('hidden');
                    statusTime.textContent = 'Ca. 60 sekunder';
                    statusTime.classList.remove('hidden');
                    statusProgress.classList.remove('hidden');

                    // Animate progress stages
                    const stages = statusProgress.querySelectorAll('.progress-stage');
                    stages.forEach(s => s.classList.remove('active'));

                    setTimeout(() => stages[0].classList.add('active'), 100);
                    setTimeout(() => {
                        statusMessage.textContent = 'Genererer rapport';
                        stages[1].classList.add('active');
                    }, 2000);
                    setTimeout(() => stages[2].classList.add('active'), 4000);
                    break;

                case 'completed':
                    dropZone.classList.add('completed');
                    dropIcon.innerHTML = '<i data-lucide="check-circle" size="56"></i>';
                    dropIcon.className = 'drop-icon success-icon';
                    dropText.classList.add('hidden');
                    dropFilename.textContent = 'franchise-agreement.pdf';
                    dropFilename.classList.remove('hidden');
                    promptButtons.classList.add('hidden');
                    outputButtons.classList.remove('hidden');
                    statusMessage.classList.add('hidden'); // No "Færdig" text
                    statusTime.textContent = '58 sekunder';
                    statusTime.classList.remove('hidden');
                    statusProgress.classList.add('hidden');
                    break;

                case 'error':
                    dropZone.classList.add('error');
                    dropIcon.innerHTML = '<i data-lucide="alert-triangle" size="56"></i>';
                    dropIcon.style.color = '#dc2626';
                    dropText.classList.add('hidden');
                    dropFilename.classList.add('hidden');
                    promptButtons.classList.add('hidden');
                    outputButtons.classList.add('hidden');
                    statusTime.classList.add('hidden');
                    statusProgress.classList.add('hidden');

                    statusMessage.innerHTML = `
                        <div class="error-message">Claude CLI kræver autentificering</div>
                        <div class="error-suggestions">
                            Kør claude auth i terminalen og følg instruktionerne.
                        </div>
                        <button class="retry-btn" onclick="setState('idle')">Prøv igen</button>
                    `;
                    statusMessage.className = 'status-message';
                    break;
            }

            // Re-initialize Lucide icons after DOM changes
            lucide.createIcons();
        }

        // Initialize with idle state
        setState('idle');
    </script>
</body>
</html>
