#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."
echo ""

# Run ESLint
echo "ğŸ“‹ Checking code with ESLint..."
npx eslint . --max-warnings 30 || {
  echo ""
  echo "âŒ ESLint found issues. Please fix them before committing."
  echo "ğŸ’¡ Tip: Run 'npx eslint . --fix' to auto-fix some issues"
  exit 1
}

echo "âœ… ESLint passed"
echo ""

# Run smoke test
echo "ğŸ”¥ Running smoke test..."
npm run test:smoke || {
  echo ""
  echo "âŒ Smoke test failed. Please fix the issues before committing."
  echo "ğŸ’¡ Tip: Run 'npm run test:smoke' to see detailed error messages"
  exit 1
}

echo ""
echo "âœ… All checks passed! Proceeding with commit..."
echo ""
